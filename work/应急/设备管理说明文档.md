
# 服务端配置

## 设备管理服务端程序部署

将`软件包/DeviceController.zip`压缩包找一个目录解压，该程序对电脑硬件要求不高，解压后有一个`DeviceController.exe`，双击启动后，会弹出如下界面：

![[Pasted image 20241109120144.png]]

## 监听端口修改

默认监听`18899`端口，客户端配好了相同的连接端口。通常该端口不需要修改。如果存在端口被其他程序占用的情况，可以在`设置面板`分页进行修改。如图：

![[Pasted image 20241109120322.png]]

端口值修改后，点击下方的保存按钮，保存后。重启该程序即可。



# 客户端配置

用于连接设备管理服务器的程序内置在了UE程序包中，启动脚本是`OpenZIEditor/Start.bat`，如图：

![[Pasted image 20241109120629.png]]

## 修改配置

配置项在`Plugins/OnionClient/Config/OnionConfig.json`文件中，有几项内容：

```json
  "deviceControllHostname": "127.0.0.1",
  "deviceControllPort": 18899,
  "deviceDisplayName": "设备显示名称",
```

- `deviceControllHostname`：此项为前置条件中启动的设备管理服务器电脑的IP地址
- `deviceControllPort`：此项为客户端要连接的服务器监听的端口，同理，在没有端口被占用的情况下此项不需要修改
- `deviceDisplayName`：此项为本设备在服务器显示的设备列表中的设备名称，可以根据实际部署情况修改为可读性强的名称。如`模拟驾驶器一`、`三号VR设备`等。

在服务端程序已经启动的情况下，客户端修改好了配置，则可以运行`Start.bat`进行连接。如果连接成功，则服务端程序中的设备列表信息会更新

# 设备管理程序启停

在服务端程序界面中，有`一键启动`，`一键停止`和`清空缓存`三个按钮。

当所有客户端设备都连接到服务端后，点击一键启动，会启动所有端的UE程序。

清空缓存按钮的作用是，服务端程序会在每次UE程序包第一次连接到服务器时，生成一个唯一ID用于标识客户端设备。这样在后续的设备管理服务端程序启动后，设备列表中会显示缓存中记录的所有设备的信息，监视设备有没有连接到服务器。

然而，在没有交付最终版本之前，UE程序包可能会多次迭代更新，每个UE程序包中的`Start.bat`的第一次运行都会向服务器生成一个唯一ID。因此建议在每次UE程序包出了新包后，点击一次清空缓存，这样就会清空老版本UE程序包的监控信息。